#!/usr/bin/env sh
# START: Husky Pre-Commit Hook - Linting and Compilation Check
# This hook runs before each commit to ensure code quality
echo "Running pre-commit checks..."
echo "Checking staged files for linting issues..."

# Run lint-staged for efficient linting of only staged files
npm run lint:staged

if [ $? -ne 0 ]; then
  echo "Linting failed for staged files! Commit blocked."
  echo "Please fix linting issues before committing."
  echo "You can bypass this with: git commit --no-verify (use with caution!)"
  exit 1
fi

echo "Compiling TypeScript..."
npm run compile

if [ $? -ne 0 ]; then
  echo "TypeScript compilation failed! Commit blocked."
  echo "Please fix compilation errors before committing."
  echo "You can bypass this with: git commit --no-verify (use with caution!)"
  exit 1
fi

echo "All pre-commit checks passed!"
echo "Proceeding with commit..."
# END: Husky Pre-Commit Hook
